import{a as C}from"./chunk-DJDQRREY.js";import{c as R,d as E,f as F,h as f,i as T,j as w,k as L,l as N,m as U}from"./chunk-YZRHWAFK.js";import{Bc as u,D as M,Fb as x,Gb as s,Jb as D,Rb as p,Sb as S,Ta as a,Tb as y,Ya as I,aa as _,db as l,hb as m,p as A,qb as k,tb as c,vb as O,wb as P,xb as i,yb as r,zb as d}from"./chunk-SHGEUKQA.js";var J=(e,o)=>o.route;function K(e,o){e&1&&(i(0,"h2"),p(1,"Simones"),r())}function Q(e,o){if(e&1&&(i(0,"span"),p(1),r()),e&2){let t=s(3).$implicit;a(),S(t.name)}}function V(e,o){if(e&1&&(i(0,"a",8)(1,"span",7),p(2),r(),m(3,Q,2,1,"span"),r()),e&2){let t=s(2).$implicit,n=s();D("routerLink",t.route),a(2),S(t.icon),a(),c(n.isCollapsed?-1:3)}}function W(e,o){if(e&1&&m(0,V,4,3,"a",8),e&2){let t=s().$implicit,n=s();c(t.permissions.includes(n.user.role.name)?0:-1)}}function X(e,o){if(e&1&&m(0,W,1,1),e&2){let t=s();c(t.user&&t.user.role&&t.user.role.name?0:-1)}}function Y(e,o){e&1&&(i(0,"span"),p(1,"Cerrar Sesi\xF3n"),r())}var g=class e{constructor(o){this.authService=o}isCollapsed=!1;user=null;menuItems=[{name:"Dashboard",icon:"\u{1F4CA}",route:"/dashboard",permissions:["Administrador","Empleado"]},{name:"Rentals",icon:"\u{1F389}",route:"/rentals",permissions:["Administrador","Empleado"]},{name:"Inventory",icon:"\u{1F4E6}",route:"/inventory",permissions:["Administrador","Empleado"]},{name:"Reports",icon:"\u{1F4C8}",route:"/reports",permissions:["Administrador"]},{name:"Users",icon:"\u{1F468}\u{1F3FD}\u200D\u{1F527}",route:"/users",permissions:["Administrador"]}];ngOnInit(){this.user=this.authService.getCurrentUser()}toggleSidebar(){this.isCollapsed=!this.isCollapsed}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||e)(I(C))};static \u0275cmp=l({type:e,selectors:[["app-sidebar"]],decls:16,vars:6,consts:[[1,"sidebar"],[1,"sidebar-header"],[1,"toggle-btn",3,"click"],[1,"sidebar-nav"],[1,"sidebar-footer"],[2,"text-align","center"],[1,"nav-item","logout-btn",3,"click"],[1,"icon"],["routerLinkActive","active",1,"nav-item",3,"routerLink"]],template:function(t,n){t&1&&(i(0,"aside",0)(1,"div",1),m(2,K,2,0,"h2"),i(3,"button",2),x("click",function(){return n.toggleSidebar()}),p(4),r()(),i(5,"nav",3),O(6,X,1,1,null,null,J),r(),i(8,"div",4)(9,"div")(10,"p",5),p(11),r()(),i(12,"button",6),x("click",function(){return n.logout()}),i(13,"span",7),p(14,"\u{1F6AA}"),r(),m(15,Y,2,0,"span"),r()()()),t&2&&(k("collapsed",n.isCollapsed),a(2),c(n.isCollapsed?-1:2),a(2),y(" ",n.isCollapsed?"\u2192":"\u2190"," "),a(2),P(n.menuItems),a(5),y("\u{1F44B}\u{1F3FC} Hola, ",n.user==null?null:n.user.name,""),a(4),c(n.isCollapsed?-1:15))},dependencies:[u,U,w,L],styles:["[_ngcontent-%COMP%]:export{primaryColor:#1976d2;secondaryColor:#424242;accentColor:#ff4081}.sidebar[_ngcontent-%COMP%]{width:250px;height:100%;background-color:#1976d2;color:#fff;transition:all .3s ease-in-out;display:flex;flex-direction:column}.sidebar.collapsed[_ngcontent-%COMP%]{width:60px}.sidebar-header[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;font-size:1.2rem;padding:4px}.toggle-btn[_ngcontent-%COMP%]:hover{opacity:.8}.sidebar-nav[_ngcontent-%COMP%]{padding:16px 0;flex:1}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;color:#fff;text-decoration:none;transition:all .3s ease-in-out;width:100%;text-align:left;background:none;border:none;cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.nav-item.active[_ngcontent-%COMP%]{background-color:#fff3}.icon[_ngcontent-%COMP%]{margin-right:16px;font-size:1.2rem}.sidebar-footer[_ngcontent-%COMP%]{margin-top:auto;border-top:1px solid rgba(255,255,255,.1);padding:16px 0}"]})};var h=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=l({type:e,selectors:[["app-layout"]],decls:4,vars:0,consts:[[1,"layout-container"],[1,"main-content"]],template:function(t,n){t&1&&(i(0,"div",0),d(1,"app-sidebar"),i(2,"main",1),d(3,"router-outlet"),r()())},dependencies:[u,f,g],styles:["[_ngcontent-%COMP%]:export{primaryColor:#1976d2;secondaryColor:#424242;accentColor:#ff4081}.layout-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100%}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;background-color:#f5f5f5}"]})};var H=(e,o)=>{let t=_(C),n=_(T);return t.isAuthenticated$().pipe(M(1),A(v=>v?!0:(n.navigate(["/login"],{queryParams:{returnUrl:o.url}}),!1)))};var z=[{path:"login",loadComponent:()=>import("./chunk-CO3A2PLU.js").then(e=>e.LoginComponent)},{path:"",component:h,canActivate:[H],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-HJIRKPFT.js").then(e=>e.DashboardComponent)},{path:"inventory",loadComponent:()=>import("./chunk-IHBFJ34W.js").then(e=>e.InventoryComponent)},{path:"rentals",loadComponent:()=>import("./chunk-3JQIALRF.js").then(e=>e.RentalsComponent)},{path:"reports",loadComponent:()=>import("./chunk-6GHG44VD.js").then(e=>e.ReportsComponent)},{path:"users",loadComponent:()=>import("./chunk-J2ALEIXR.js").then(e=>e.UsersComponent)}]},{path:"**",redirectTo:"dashboard"}];var B=(e,o)=>{let t=localStorage.getItem("token");if(t){let n=e.clone({headers:e.headers.set("Authorization",`Bearer ${t}`)});return o(n)}return o(e)};var G={providers:[N(z),R(E([B]))]};var b=class e{title="inventario-simones-frontend";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=l({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&d(0,"router-outlet")},dependencies:[f],encapsulation:2})};F(b,G).catch(e=>console.error(e));
