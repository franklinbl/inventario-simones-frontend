import{a as w}from"./chunk-DJDQRREY.js";import{b as x,d as f,f as S,g as F,j as P,m as y,n as L,t as O,v as E}from"./chunk-SVD2HPHF.js";import{i as M}from"./chunk-YZRHWAFK.js";import{Bc as _,Fb as h,G as v,Gb as C,Rb as a,Ta as o,Tb as g,aa as d,db as b,hb as l,ob as u,qb as c,tb as m,xb as t,yb as i,zb as p}from"./chunk-SHGEUKQA.js";function N(n,s){n&1&&(t(0,"div",6),a(1," El usuario es requerido "),i())}function G(n,s){n&1&&(t(0,"div",6),a(1," La contrase\xF1a es requerida "),i())}function U(n,s){if(n&1&&(t(0,"div",9),a(1),i()),n&2){let r=C();o(),g(" ",r.errorMessage," ")}}var k=class n{fb=d(O);authService=d(w);router=d(M);loginForm;isLoading=!1;errorMessage="";constructor(){this.loginForm=this.fb.group({username:["",f.required],password:["",f.required]})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}onSubmit(){this.loginForm.invalid||(this.isLoading=!0,this.errorMessage="",this.authService.login(this.username.value,this.password.value).pipe(v(()=>this.isLoading=!1)).subscribe({next:s=>{if(s){let r=this.router.parseUrl(this.router.url).queryParams.returnUrl||"/inventory";this.router.navigateByUrl(r)}else this.errorMessage="Usuario o contrase\xF1a incorrectos"},error:()=>{this.errorMessage="Ocurri\xF3 un error al intentar iniciar sesi\xF3n"}}))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=b({type:n,selectors:[["app-login"]],decls:18,vars:10,consts:[[1,"login-container"],[1,"login-box"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username"],[1,"invalid-feedback"],["for","password"],["type","password","id","password","formControlName","password"],[1,"error-message"],["type","submit",3,"disabled"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Iniciar Sesi\xF3n"),i(),t(4,"form",2),h("ngSubmit",function(){return e.onSubmit()}),t(5,"div",3)(6,"label",4),a(7,"Usuario"),i(),p(8,"input",5),l(9,N,2,0,"div",6),i(),t(10,"div",3)(11,"label",7),a(12,"Contrase\xF1a"),i(),p(13,"input",8),l(14,G,2,0,"div",6),i(),l(15,U,2,1,"div",9),t(16,"button",10),a(17),i()()()()),r&2&&(o(4),u("formGroup",e.loginForm),o(4),c("is-invalid",e.username.invalid&&e.username.touched),o(),m(e.username.invalid&&e.username.touched?9:-1),o(4),c("is-invalid",e.password.invalid&&e.password.touched),o(),m(e.password.invalid&&e.password.touched?14:-1),o(),m(e.errorMessage?15:-1),o(),u("disabled",e.loginForm.invalid||e.isLoading),o(),g(" ",e.isLoading?"Cargando...":"Ingresar"," "))},dependencies:[_,E,P,x,S,F,y,L],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5}.login-box[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:1rem;text-align:center}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}"]})};export{k as LoginComponent};
