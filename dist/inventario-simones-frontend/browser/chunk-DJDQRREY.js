import{b as m,i as p,n as g}from"./chunk-YZRHWAFK.js";import{$ as n,T as l,W as c,l as i,p as a,wa as u,z as s}from"./chunk-SHGEUKQA.js";var f=class o{constructor(t,r){this.router=t;this.http=r;localStorage.getItem("token")&&this.isAuthenticated.set(!0)}isAuthenticated=u(!1);API_URL=g.apiUrl;login(t,r){return this.http.post(`${this.API_URL}/auth/login`,{username:t,password:r}).pipe(l({next:e=>{localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.isAuthenticated.set(!0)},error:e=>{console.error("Login error:",e),this.isAuthenticated.set(!1)}}),a(()=>!0),s(()=>i(!1)))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.isAuthenticated.set(!1),this.router.navigate(["/login"])}isAuthenticated$(){return i(this.isAuthenticated())}getCurrentUser(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}static \u0275fac=function(r){return new(r||o)(n(p),n(m))};static \u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})};export{f as a};
