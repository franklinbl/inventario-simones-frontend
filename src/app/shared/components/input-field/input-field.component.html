@if (type !== 'textarea' && type !== 'calendar' && type !== 'select' && type !== 'search-select') {
  <label *ngIf="label" for="input">{{ label }}</label>
  <input
    id="input"
    [type]="type"
    [placeholder]="placeholder"
    [value]="value"
    (input)="onInput($event)"
    (blur)="onTouched()"
    [min]="min"
    [max]="max"
    [disabled]="disabled"
    [class]="classBase"
  />
}

@if (type === 'calendar') {
  <input
    id="input"
    type="date"
    [placeholder]="placeholder"
    [value]="value"
    (input)="onInput($event)"
    (blur)="onTouched()"
    [disabled]="disabled"
    [class]="classBase"
  />
}

@if (type === 'textarea') {
  <textarea
    placeholder="Notas adicionales..."
    rows="3"
    [class]="classBase"
  ></textarea>
}

@if (type === 'select') {
  <select
    [value]="value"
    (change)="onInput($event)"
    [disabled]="disabled"
    [class]="classBase"
  >
  @for (option of selectOption; track $index) {
    <option [value]="option.value">{{ option.label }}</option>
  }
  </select>
}

@if (type === 'search-select') {
  <label *ngIf="label" class="block text-sm font-medium text-slate-600 mb-1">
    {{ label }}
  </label>

  <div class="relative">
    <input
      type="text"
      [value]="value"
      (input)="onInput($event)"
      [placeholder]="placeholder"
      class="w-full border rounded-lg py-1 px-3 text-slate-700 placeholder-slate-400 bg-[#fcfdf6] focus:outline-none focus:ring-1 focus:ring-[#556995]"
    />

    @if (filteredProducts | async; as products) {
      @if (products.length > 0) {
        <div
          class="absolute z-50 top-full left-0 right-0 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto"
        >
          @for (product of products; track $index) {
            <div
              (click)="selectProductInputWithSearch(product)"
              class="px-3 py-2 cursor-pointer hover:bg-[#f5f7fa] flex justify-between items-center"
            >
              <div class="flex flex-col">
                <span class="text-sm text-slate-700">{{ product.name }}</span>
                <span class="text-xs text-slate-500">Stock: {{ product.available_quantity }}</span>
              </div>
            </div>
          }
        </div>
      } @else if (value.length > 3) {
        <div class="absolute z-50 top-full left-0 right-0 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg">
          <div class="px-3 py-2 text-sm text-slate-500">{{ noResultsText }}</div>
        </div>
      }
    }
  </div>
}